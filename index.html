<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Fresh &amp; Healthy - Menu</title>
    <meta name="description" content="Fresh & Healthy's Menu">
    <link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Georgia&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Georgia, serif;
            line-height: 1.6;
            color: #333;
            background-color: #f9f9f9;
            min-height: 100vh;
            position: relative;
        }

        .background {
            position: fixed;
            inset: 0;
            width: 100%;
            height: 100%;
            z-index: -10;
        }

        .background-desktop {
            display: none;
            position: absolute;
            inset: 0;
            background: url('./images/desktop_background.png') center/cover fixed no-repeat;
        }

        .background-mobile {
            display: block;
            position: absolute;
            inset: 0;
            background: url('./images/phone_bg1.png') center/cover fixed no-repeat;
        }

        .overlay {
            position: absolute;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.15);
        }

        @media (min-width: 768px) {
            .background-desktop {
                display: block;
            }
            .background-mobile {
                display: none;
            }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 1.5rem;
            min-height: 100vh;
            padding-top: 3rem;
            padding-bottom: 3rem;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
        }

        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3.75rem;
            font-weight: bold;
            color: white;
            margin-bottom: 2rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        @media (min-width: 768px) {
            .header h1 {
                font-size: 4.5rem;
            }
            .header {
                margin-bottom: 2.5rem;
                padding: 2.5rem;
            }
        }

        .menu-card {
            background: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-radius: 1rem;
            padding: 2rem;
            border: 1px solid #e5e7eb;
        }

        .dietary-preferences {
            margin-bottom: 3rem;
            text-align: center;
        }

        .dietary-preferences h2 {
            font-size: 1.125rem;
            font-weight: 500;
            color: #2c1810;
            margin-bottom: 1rem;
        }

        .dietary-preferences ul {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.75rem;
            list-style: none;
        }

        .dietary-preferences li {
            padding: 0.75rem 1.25rem;
            font-size: 0.875rem;
            font-weight: 500;
            background: #f3f4f6;
            color: #111827;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: background 0.3s, color 0.3s;
        }

        .dietary-preferences li:hover {
            background: #e5e7eb;
        }

        .dietary-preferences li.active {
            background: #2c1810;
            color: white;
        }

        .menu-items {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .menu-item {
            border-bottom: 1px solid #e3d5c1;
            padding-bottom: 2rem;
        }

        .menu-item:last-child {
            border-bottom: none;
        }

        .menu-item-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 0.5rem;
        }

        .menu-item-header h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: #2c1810;
        }

        .menu-item-header .dotted-line {
            flex-grow: 1;
            border-bottom: 1px dotted #2c1810;
            margin: 0 0.5rem;
        }

        .menu-item-header .price {
            font-size: 1.25rem;
            font-weight: 500;
            color: #2c1810;
            margin-left: 1rem;
        }

        .menu-item p.description {
            color: #5c4434;
            font-style: italic;
            margin-bottom: 1rem;
        }

        .menu-item p.ingredients {
            color: #5c4434;
            font-size: 0.875rem;
            margin-bottom: 0.75rem;
        }

        .menu-item p.ingredients span {
            font-weight: 500;
        }

        .menu-item p.allergens {
            color: #9b2c2c;
            font-size: 0.875rem;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .menu-item-header h3 {
                font-size: 1.25rem;
            }
            .menu-item-header .price {
                font-size: 1.125rem;
            }
            .container {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="background">
        <div class="background-desktop"></div>
        <div class="background-mobile"></div>
        <div class="overlay"></div>
    </div>
    <div class="container">
        <div class="header">
            <h1>Fresh &amp; Healthy</h1>
        </div>
        <div class="menu-card">
            <div class="dietary-preferences">
                <h2>Diätvorlieben</h2>
                <ul>
                    <li data-filter="all" class="active">Alle</li>
                    <li data-filter="Glutenfrei">Glutenfrei</li>
                    <li data-filter="Laktosefrei">Laktosefrei</li>
                    <li data-filter="Nussfrei">Nussfrei</li>
                    <li data-filter="Fischfrei">Fischfrei</li>
                    <li data-filter="Vegan">Vegan</li>
                </ul>
            </div>
            <div class="menu-items" id="menu-items">
                <!-- Menu items will be inserted here by JavaScript -->
            </div>
        </div>
    </div>
    <script>
        // Function to fetch and render menu items from JSON file
        async function loadMenuData() {
            try {
                const response = await fetch('menus/menu.json');
                if (!response.ok) {
                    throw new Error('Failed to load menu data');
                }
                const menuData = await response.json();
                return menuData;
            } catch (error) {
                console.error('Error fetching menu data:', error);
                return null;
            }
        }

        // Function to render menu items
        function renderMenuItems(menuData, filter = 'all') {
            const menuContainer = document.getElementById('menu-items');
            menuContainer.innerHTML = ''; // Clear existing items

            // Filter menu items based on selected dietary preference
            let filteredItems = menuData.restaurant.menuItems;
            if (filter !== 'all') {
                filteredItems = menuData.restaurant.menuItems.filter(item => {
                    if (filter === 'Vegan') {
                        return item.allergens.length === 0; // Vegan items have no allergens
                    } else if (filter === 'Glutenfrei') {
                        return !item.allergens.includes('Gluten'); // No gluten allergen
                    } else if (filter === 'Laktosefrei') {
                        return !item.allergens.includes('Milchprodukte'); // No dairy
                    } else if (filter === 'Nussfrei') {
                        return !item.allergens.includes('Nüsse'); // No nuts
                    } else if (filter === 'Fischfrei') {
                        return !item.allergens.includes('Fisch'); // No fish
                    }
                    return true;
                });
            }

            // Render filtered items
            filteredItems.forEach(item => {
                const menuItem = document.createElement('div');
                menuItem.className = 'menu-item';
                menuItem.innerHTML = `
                    <div class="menu-item-header">
                        <h3>${item.name}</h3>
                        <div class="dotted-line"></div>
                        <span class="price">${item.price.toFixed(2)} €</span>
                    </div>
                    <p class="description">${item.description}</p>
                    <p class="ingredients"><span>Zutaten:</span> ${item.ingredients.join(', ')}</p>
                    ${item.allergens.length > 0 ? `<p class="allergens">Enthält: ${item.allergens.join(', ')}</p>` : ''}
                `;
                menuContainer.appendChild(menuItem);
            });
        }

        // Set up filter buttons
        function setupFilters(menuData) {
            const filterButtons = document.querySelectorAll('.dietary-preferences li');
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Remove active class from all buttons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    // Add active class to clicked button
                    button.classList.add('active');
                    // Render menu with selected filter
                    const filter = button.getAttribute('data-filter');
                    renderMenuItems(menuData, filter);
                });
            });
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', async () => {
            const menuData = await loadMenuData();
            if (menuData) {
                renderMenuItems(menuData); // Render all items initially
                setupFilters(menuData); // Set up filter button listeners
            } else {
                // Display error message in the menu container
                const menuContainer = document.getElementById('menu-items');
                menuContainer.innerHTML = '<p style="color: red; text-align: center;">Fehler beim Laden des Menüs. Bitte versuchen Sie es später erneut.</p>';
            }
        });
    </script>
</body>
</html>